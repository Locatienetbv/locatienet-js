{"version":3,"file":"leaflet-routing.min.js","sources":["../src/Control.Geocoder.js","../src/Control.Geocoder.Locatienet.js","../src/Routing.Locatienet.js"],"sourcesContent":["(function (factory) {\n\t// Packaging/modules magic dance\n\tvar L;\n\tif (typeof define === 'function' && define.amd) {\n\t\t// AMD\n\t\tdefine(['leaflet'], factory);\n\t} else if (typeof module !== 'undefined') {\n\t\t// Node/CommonJS\n\t\tL = require('leaflet');\n\t\tmodule.exports = factory(L);\n\t} else {\n\t\t// Browser globals\n\t\tif (typeof window.L === 'undefined')\n\t\t\tthrow 'Leaflet must be loaded first';\n\t\tfactory(window.L);\n\t}\n}(function (L) {\n\t'use strict';\n\tL.Control.Geocoder = L.Control.extend({\n\t\toptions: {\n\t\t\tshowResultIcons: false,\n\t\t\tcollapsed: true,\n\t\t\texpand: 'click',\n\t\t\tposition: 'topright',\n\t\t\tplaceholder: 'Search...',\n\t\t\terrorMessage: 'Nothing found.'\n\t\t},\n\n\t\t_callbackId: 0,\n\n\t\tinitialize: function (options) {\n\t\t\tL.Util.setOptions(this, options);\n\t\t\tif (!this.options.geocoder) {\n\t\t\t\tthis.options.geocoder = new L.Control.Geocoder.Nominatim();\n\t\t\t}\n\t\t},\n\n\t\tonAdd: function (map) {\n\t\t\tvar className = 'leaflet-control-geocoder',\n\t\t\t    container = L.DomUtil.create('div', className),\n\t\t\t\ticon = L.DomUtil.create('div', 'leaflet-control-geocoder-icon', container),\n\t\t\t    form = this._form = L.DomUtil.create('form', className + '-form', container),\n\t\t\t    input;\n\n\t\t\tthis._map = map;\n\t\t\tthis._container = container;\n\t\t\tinput = this._input = L.DomUtil.create('input');\n\t\t\tinput.type = 'text';\n\t\t\tinput.placeholder = this.options.placeholder;\n\n\t\t\tL.DomEvent.addListener(input, 'keydown', this._keydown, this);\n\t\t\t//L.DomEvent.addListener(input, 'onpaste', this._clearResults, this);\n\t\t\t//L.DomEvent.addListener(input, 'oninput', this._clearResults, this);\n\n\t\t\tthis._errorElement = document.createElement('div');\n\t\t\tthis._errorElement.className = className + '-form-no-error';\n\t\t\tthis._errorElement.innerHTML = this.options.errorMessage;\n\n\t\t\tthis._alts = L.DomUtil.create('ul', className + '-alternatives leaflet-control-geocoder-alternatives-minimized');\n\n\t\t\tform.appendChild(input);\n\t\t\tform.appendChild(this._errorElement);\n\t\t\tcontainer.appendChild(this._alts);\n\n\t\t\tL.DomEvent.addListener(form, 'submit', this._geocode, this);\n\n\t\t\tif (this.options.collapsed) {\n\t\t\t\tif (this.options.expand === 'click') {\n\t\t\t\t\tL.DomEvent.addListener(icon, 'click', function(e) {\n\t\t\t\t\t\t// TODO: touch\n\t\t\t\t\t\tif (e.button === 0 && e.detail === 1) {\n\t\t\t\t\t\t\tthis._toggle();\n\t\t\t\t\t\t}\n\t\t\t\t\t}, this);\n\t\t\t\t} else {\n\t\t\t\t\tL.DomEvent.addListener(icon, 'mouseover', this._expand, this);\n\t\t\t\t\tL.DomEvent.addListener(icon, 'mouseout', this._collapse, this);\n\t\t\t\t\tthis._map.on('movestart', this._collapse, this);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis._expand();\n\t\t\t}\n\n\t\t\tL.DomEvent.disableClickPropagation(container);\n\n\t\t\treturn container;\n\t\t},\n\n\t\t_geocodeResult: function (results) {\n\t\t\tL.DomUtil.removeClass(this._container, 'leaflet-control-geocoder-throbber');\n\t\t\tif (results.length === 1) {\n\t\t\t\tthis._geocodeResultSelected(results[0]);\n\t\t\t} else if (results.length > 0) {\n\t\t\t\tthis._alts.innerHTML = '';\n\t\t\t\tthis._results = results;\n\t\t\t\tL.DomUtil.removeClass(this._alts, 'leaflet-control-geocoder-alternatives-minimized');\n\t\t\t\tfor (var i = 0; i < results.length; i++) {\n\t\t\t\t\tthis._alts.appendChild(this._createAlt(results[i], i));\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tL.DomUtil.addClass(this._errorElement, 'leaflet-control-geocoder-error');\n\t\t\t}\n\t\t},\n\n\t\tmarkGeocode: function(result) {\n\t\t\tthis._map.fitBounds(result.bbox);\n\n\t\t\tif (this._geocodeMarker) {\n\t\t\t\tthis._map.removeLayer(this._geocodeMarker);\n\t\t\t}\n\n\t\t\tthis._geocodeMarker = new L.Marker(result.center)\n\t\t\t\t.bindPopup(result.html || result.name)\n\t\t\t\t.addTo(this._map)\n\t\t\t\t.openPopup();\n\n\t\t\treturn this;\n\t\t},\n\n\t\t_geocode: function(event) {\n\t\t\tL.DomEvent.preventDefault(event);\n\n\t\t\tL.DomUtil.addClass(this._container, 'leaflet-control-geocoder-throbber');\n\t\t\tthis._clearResults();\n\t\t\tthis.options.geocoder.geocode(this._input.value, this._geocodeResult, this);\n\n\t\t\treturn false;\n\t\t},\n\n\t\t_geocodeResultSelected: function(result) {\n\t\t\tif (this.options.collapsed) {\n\t\t\t\tthis._collapse();\n\t\t\t} else {\n\t\t\t\tthis._clearResults();\n\t\t\t}\n\t\t\tthis.markGeocode(result);\n\t\t},\n\n\t\t_toggle: function() {\n\t\t\tif (this._container.className.indexOf('leaflet-control-geocoder-expanded') >= 0) {\n\t\t\t\tthis._collapse();\n\t\t\t} else {\n\t\t\t\tthis._expand();\n\t\t\t}\n\t\t},\n\n\t\t_expand: function () {\n\t\t\tL.DomUtil.addClass(this._container, 'leaflet-control-geocoder-expanded');\n\t\t\tthis._input.select();\n\t\t},\n\n\t\t_collapse: function () {\n\t\t\tthis._container.className = this._container.className.replace(' leaflet-control-geocoder-expanded', '');\n\t\t\tL.DomUtil.addClass(this._alts, 'leaflet-control-geocoder-alternatives-minimized');\n\t\t\tL.DomUtil.removeClass(this._errorElement, 'leaflet-control-geocoder-error');\n\t\t},\n\n\t\t_clearResults: function () {\n\t\t\tL.DomUtil.addClass(this._alts, 'leaflet-control-geocoder-alternatives-minimized');\n\t\t\tthis._selection = null;\n\t\t\tL.DomUtil.removeClass(this._errorElement, 'leaflet-control-geocoder-error');\n\t\t},\n\n\t\t_createAlt: function(result, index) {\n\t\t\tvar li = document.createElement('li'),\n\t\t\t    a = L.DomUtil.create('a', '', li),\n\t\t\t    icon = this.options.showResultIcons && result.icon ? L.DomUtil.create('img', '', a) : null,\n\t\t\t    text = result.html ? undefined : document.createTextNode(result.name);\n\n\t\t\tif (icon) {\n\t\t\t\ticon.src = result.icon;\n\t\t\t}\n\n\t\t\ta.href = '#';\n\t\t\ta.setAttribute('data-result-index', index);\n\n\t\t\tif (result.html) {\n\t\t\t\ta.innerHTML = result.html;\n\t\t\t} else {\n\t\t\t\ta.appendChild(text);\n\t\t\t}\n\n\t\t\tL.DomEvent.addListener(li, 'click', function clickHandler(e) {\n\t\t\t\tL.DomEvent.preventDefault(e);\n\t\t\t\tthis._geocodeResultSelected(result);\n\t\t\t}, this);\n\n\t\t\treturn li;\n\t\t},\n\n\t\t_keydown: function(e) {\n\t\t\tvar _this = this,\n\t\t\t\tselect = function select(dir) {\n\t\t\t\t\tif (_this._selection) {\n\t\t\t\t\t\tL.DomUtil.removeClass(_this._selection.firstChild, 'leaflet-control-geocoder-selected');\n\t\t\t\t\t\t_this._selection = _this._selection[dir > 0 ? 'nextSibling' : 'previousSibling'];\n\t\t\t\t\t}\n\t\t\t\t\tif (!_this._selection) {\n\t\t\t\t\t\t_this._selection = _this._alts[dir > 0 ? 'firstChild' : 'lastChild'];\n\t\t\t\t\t}\n\n\t\t\t\t\tif (_this._selection) {\n\t\t\t\t\t\tL.DomUtil.addClass(_this._selection.firstChild, 'leaflet-control-geocoder-selected');\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\tswitch (e.keyCode) {\n\t\t\t// Escape\n\t\t\tcase 27:\n\t\t\t\tthis._collapse();\n\t\t\t\tbreak;\n\t\t\t// Up\n\t\t\tcase 38:\n\t\t\t\tselect(-1);\n\t\t\t\tL.DomEvent.preventDefault(e);\n\t\t\t\tbreak;\n\t\t\t// Up\n\t\t\tcase 40:\n\t\t\t\tselect(1);\n\t\t\t\tL.DomEvent.preventDefault(e);\n\t\t\t\tbreak;\n\t\t\t// Enter\n\t\t\tcase 13:\n\t\t\t\tif (this._selection) {\n\t\t\t\t\tvar index = parseInt(this._selection.firstChild.getAttribute('data-result-index'), 10);\n\t\t\t\t\tthis._geocodeResultSelected(this._results[index]);\n\t\t\t\t\tthis._clearResults();\n\t\t\t\t\tL.DomEvent.preventDefault(e);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t});\n\n\tL.Control.geocoder = function(id, options) {\n\t\treturn new L.Control.Geocoder(id, options);\n\t};\n\n\tL.Control.Geocoder.callbackId = 0;\n\tL.Control.Geocoder.jsonp = function(url, params, callback, context, jsonpParam) {\n\t\tvar callbackId = '_l_geocoder_' + (L.Control.Geocoder.callbackId++);\n\t\tparams[jsonpParam || 'callback'] = callbackId;\n\t\twindow[callbackId] = L.Util.bind(callback, context);\n\t\tvar script = document.createElement('script');\n\t\tscript.type = 'text/javascript';\n\t\tscript.src = url + L.Util.getParamString(params);\n\t\tscript.id = callbackId;\n\t\tdocument.getElementsByTagName('head')[0].appendChild(script);\n\t};\n\tL.Control.Geocoder.getJSON = function(url, params, callback) {\n\t\tvar xmlHttp = new XMLHttpRequest();\n\t\txmlHttp.open( \"GET\", url + L.Util.getParamString(params), true);\n\t\txmlHttp.send(null);\n\t\txmlHttp.onreadystatechange = function () {\n\t\t\tif (xmlHttp.readyState != 4) return;\n\t\t\tif (xmlHttp.status != 200 && req.status != 304) return;\n\t\t\tcallback(JSON.parse(xmlHttp.response));\n\t\t};\n\t};\n\n\tL.Control.Geocoder.template = function (str, data, htmlEscape) {\n\t\treturn str.replace(/\\{ *([\\w_]+) *\\}/g, function (str, key) {\n\t\t\tvar value = data[key];\n\t\t\tif (value === undefined) {\n\t\t\t\tvalue = '';\n\t\t\t} else if (typeof value === 'function') {\n\t\t\t\tvalue = value(data);\n\t\t\t}\n\t\t\treturn L.Control.Geocoder.htmlEscape(value);\n\t\t});\n\t};\n\n\t// Adapted from handlebars.js\n\t// https://github.com/wycats/handlebars.js/\n\tL.Control.Geocoder.htmlEscape = (function() {\n\t\tvar badChars = /[&<>\"'`]/g;\n\t\tvar possible = /[&<>\"'`]/;\n\t\tvar escape = {\n\t\t  '&': '&amp;',\n\t\t  '<': '&lt;',\n\t\t  '>': '&gt;',\n\t\t  '\"': '&quot;',\n\t\t  '\\'': '&#x27;',\n\t\t  '`': '&#x60;'\n\t\t};\n\n\t\tfunction escapeChar(chr) {\n\t\t  return escape[chr];\n\t\t}\n\n\t\treturn function(string) {\n\t\t\tif (string == null) {\n\t\t\t\treturn '';\n\t\t\t} else if (!string) {\n\t\t\t\treturn string + '';\n\t\t\t}\n\n\t\t\t// Force a string conversion as this will be done by the append regardless and\n\t\t\t// the regex test will do this transparently behind the scenes, causing issues if\n\t\t\t// an object's to string has escaped characters in it.\n\t\t\tstring = '' + string;\n\n\t\t\tif (!possible.test(string)) {\n\t\t\t\treturn string;\n\t\t\t}\n\t\t\treturn string.replace(badChars, escapeChar);\n\t\t};\n\t})();\n\n\n\treturn L.Control.Geocoder;\n}));\n","(function (factory) {\n\t// Packaging/modules magic dance\n\tvar L;\n\tif (typeof define === 'function' && define.amd) {\n\t\t// AMD\n\t\tdefine(['leaflet'], factory);\n\t} else if (typeof module !== 'undefined') {\n\t\t// Node/CommonJS\n\t\tL = require('leaflet');\n\t\tmodule.exports = factory(L);\n\t} else {\n\t\t// Browser globals\n\t\tif (typeof window.L === 'undefined')\n\t\t\tthrow 'Leaflet must be loaded first';\n\t\tfactory(window.L);\n\t}\n}(function (L) {\n\t'use strict';\n\n\tL.Control.Geocoder.Locatienet = L.Class.extend({\n\t\toptions: {\n\t\t\tservice_url: 'https://services.locatienet.com/rs/v1/Locate/'\n\t\t},\n\n\t\tinitialize: function() {\n\t\t\tthis._apikey = window.LN_API_KEY;\n\t\t},\n\n\t\tgeocode: function (query, cb, context) {\n\t\t\tconst body = {\n\t\t\t\ttext: query,\n\t\t\t\toptions: {\n\t\t\t\t\tlanguage: 'nl',\n\t\t\t\t\tnumresults: 5,\n\t\t\t\t\tminimalResultScore: 0 // fetch all possible results\n\t\t\t\t}\n\t\t\t}\n\n\n\t\t\tthis._post(this.options.service_url + 'searchByText', body, function(err, data) {\n\t\t\t\tvar results = [],\n\t\t\t\tloc,\n\t\t\t\tlatLng,\n\t\t\t\tlatLngBounds;\n\t\t\t\tif (data && data.length) {\n\t\t\t\t\tfor (var i = 0; i <= data.length - 1; i++) {\n\t\t\t\t\t\tloc = data[i];\n\t\t\t\t\t\tlatLng = L.latLng(loc.coordinate.y, loc.coordinate.x);\n\n\t\t\t\t\t\tif(loc.hasOwnProperty('bbox')) {\n\t\t\t\t\t\t\t\tlatLngBounds = L.latLngBounds(L.latLng(loc.bbox.slice(0, 2).reverse()), L.latLng(loc.bbox.slice(2, 4).reverse()));\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tlatLngBounds = L.latLngBounds(latLng, latLng);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresults[i] = {\n\t\t\t\t\t\t\tname: loc.description,\n\t\t\t\t\t\t\tbbox: latLngBounds,\n\t\t\t\t\t\t\tcenter: latLng\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tcb.call(context, results);\n\t\t\t});\n\t\t},\n\n\t\treverse: function (location, scale, cb, context) {\n\n\t\t\tvar body = {\n\t\t\t\tcoordinate: { x: location.lng, y: location.lat },\n\t\t\t\toptions: { numresults: 5}\n\t\t\t}\n\n\t\t\tthis._post(this.options.service_url + 'searchByPosition', body, function(err, data) {\n\t\t\t\tvar results = [],\n\t\t\t\tloc,\n\t\t\t\tlatLng,\n\t\t\t\tlatLngBounds;\n\t\t\t\tif (data && data.length) {\n\t\t\t\t\tfor (var i = 0; i <= data.length - 1; i++) {\n\t\t\t\t\t\tloc = data[i];\n\t\t\t\t\t\tlatLng = L.latLng(loc.coordinate.y, loc.coordinate.x);\n\t\t\t\t\t\tif(loc.hasOwnProperty('bbox'))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlatLngBounds = L.latLngBounds(L.latLng(loc.bbox.slice(0, 2).reverse()), L.latLng(loc.bbox.slice(2, 4).reverse()));\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlatLngBounds = L.latLngBounds(latLng, latLng);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresults[i] = {\n\t\t\t\t\t\t\tname: loc.description,\n\t\t\t\t\t\t\tbbox: latLngBounds,\n\t\t\t\t\t\t\tcenter: latLng\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tcb.call(context, results);\n\t\t\t});\n\t\t},\n\n\t\t_post: function (url, data, callback) {\n\t\t\tfetch(url, {\n\t\t\t\tmethod: 'POST',\n\t\t\t\theaders: {\n\t\t\t\t\t'Accept': 'application/json',\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t'X-API-KEY': this._apikey\n\t\t\t\t},\n\t\t\t\tbody: JSON.stringify(data)\n\t\t\t})\n\t\t\t\t.then(res => res.json())\n\t\t\t\t.then(res => callback(null, res));\n\t\t}\n\t});\n\n\tL.Control.Geocoder.locatienet = function(apikey) {\n\t\t\treturn new L.Control.Geocoder.Locatienet(apikey);\n\t};\n\n}));\n","(function (factory) {\n\t// Packaging/modules magic dance\n\tvar L;\n\tif (typeof define === 'function' && define.amd) {\n\t\t// AMD\n\t\tdefine(['leaflet'], factory);\n\t} else if (typeof module !== 'undefined') {\n\t\t// Node/CommonJS\n\t\tL = require('leaflet');\n\t\tmodule.exports = factory(L);\n\t} else {\n\t\t// Browser globals\n\t\tif (typeof window.L === 'undefined')\n\t\t\tthrow 'Leaflet must be loaded first';\n\t\tfactory(window.L);\n\t}\n}(function (L) {\n\t\n\t'use strict';\n\n\tvar L = require('leaflet');\n\n\tL.Routing = L.Routing || {};\n\n\tL.Routing.Locatienet = L.Evented.extend({\n\t\toptions: {\n\t\t\tserviceUrl: 'https://services.locatienet.com/rs/v1/Route/calculateRouteDescription',\n\t\t\ttimeout: 30 * 1000,\n\t\t\turlParameters: {}\n\t\t},\n\n\t\tinitialize: function(options) {\n\t\t\tthis._apikey = window.LN_API_KEY;\n\t\t\tL.Util.setOptions(this, options);\n\t\t},\n\n\t\troute: function(waypoints, callback, context, options) {\n\t\t\tvar timedOut = false,\n\t\t\t\twps = [],\n\t\t\t\tbody,\n\t\t\t\ttimer,\n\t\t\t\twp,\n\t\t\t\ti;\n\n\t\t\toptions = options || {};\n\t\t\tbody = this.buildRouteRequest(waypoints, options);\n\n\t\t\ttimer = setTimeout(function() {\n\t\t\t\t\t\t\t\ttimedOut = true;\n\t\t\t\t\t\t\t\tcallback.call(context || callback, {\n\t\t\t\t\t\t\t\t\tstatus: -1,\n\t\t\t\t\t\t\t\t\tmessage: 'Locatienet request timed out.'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}, this.options.timeout);\n\n\t\t\t// Create a copy of the waypoints, since they\n\t\t\t// might otherwise be asynchronously modified while\n\t\t\t// the request is being processed.\n\t\t\tfor (i = 0; i < waypoints.length; i++) {\n\t\t\t\twp = waypoints[i];\n\t\t\t\twps.push({\n\t\t\t\t\tlatLng: wp.latLng,\n\t\t\t\t\tname: wp.name,\n\t\t\t\t\toptions: wp.options\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis._post(this.options.serviceUrl, body, L.bind(function(err, data) {\n\t\t\t\t\n\n\t\t\t\tclearTimeout(timer);\n\t\t\t\tif (!timedOut) {\n\t\t\t\t\tvar fired = err ? err : data;\n\t\t\t\t\tthis.fire(\"response\", {\n\t\t\t\t\t\t//status: fired.status,\n\t\t\t\t\t\t//limit: Number(fired.getResponseHeader(\"X-RateLimit-Limit\")),\n\t\t\t\t\t\t//remaining: Number(fired.getResponseHeader(\"X-RateLimit-Remaining\")),\n\t\t\t\t\t\t//reset: Number(fired.getResponseHeader(\"X-RateLimit-Reset\")),\n\t\t\t\t\t\t//credits: Number(fired.getResponseHeader(\"X-RateLimit-Credits\"))\n\t\t\t\t\t});\n\t\t\t\t\tif (!err) {\n\t\t\t\t\t\tthis._routeDone(data, wps, callback, context);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar finalResponse;\n\t\t\t\t\t\tvar responseText = err && err.responseText;\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tfinalResponse = JSON.parse(responseText);\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\tfinalResponse = responseText;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcallback.call(context || callback, {\n\t\t\t\t\t\t\tstatus: -1,\n\t\t\t\t\t\t\tmessage: 'HTTP request failed: ' + err,\n\t\t\t\t\t\t\tresponse: finalResponse\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, this));\n\n\t\t\treturn this;\n\t\t},\n\n\t\t_routeDone: function(response, inputWaypoints, callback, context) {\n\t\t\tvar alts = [],\n\t\t\t    mappedWaypoints,\n\t\t\t    coordinates,\n\t\t\t    i,\n\t\t\t    path;\n\n\t\t\tcontext = context || callback;\n\t\t\tpath = response;\n\t\t\tcoordinates = this._decodePolyline(path.polyline);\n\t\t\tmappedWaypoints =\n\t\t\t\tthis._mapWaypointIndices(inputWaypoints, path.descriptions, coordinates);\n\n\t\t\talts.push({\n\t\t\t\tname: '',\n\t\t\t\tcoordinates: coordinates,\n\t\t\t\tinstructions: this._convertInstructions(path.descriptions, coordinates),\n\t\t\t\tsummary: {\n\t\t\t\t\ttotalDistance: path.distance,\n\t\t\t\t\ttotalTime: path.travelTime,\n\t\t\t\t\ttotalAscend: 0,\n\t\t\t\t},\n\t\t\t\tinputWaypoints: inputWaypoints,\n\t\t\t\tactualWaypoints: mappedWaypoints.waypoints,\n\t\t\t\twaypointIndices: mappedWaypoints.waypointIndices\n\t\t\t});\n\t\t\t\n\n\t\t\tcallback.call(context, null, alts);\n\t\t},\n\n\t\t_decodePolyline: function(coords) {\n\t\t\tvar latlngs = new Array(coords.length),\n\t\t\t\ti;\n\t\t\tfor (i = 0; i < coords.length; i++) {\n\t\t\t\tlatlngs[i] = new L.LatLng(coords[i].y, coords[i].x);\n\t\t\t}\n\n\t\t\treturn latlngs;\n\t\t},\n\n\t\t_toWaypoints: function(inputWaypoints, vias) {\n\t\t\tvar wps = [],\n\t\t\t    i;\n\t\t\tfor (i = 0; i < vias.length; i++) {\n\t\t\t\twps.push({\n\t\t\t\t\tlatLng: L.latLng(vias[i]),\n\t\t\t\t\tname: inputWaypoints[i].name,\n\t\t\t\t\toptions: inputWaypoints[i].options\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn wps;\n\t\t},\n\n\t\tbuildRouteRequest: function(waypoints, options) {\n\t\t\tvar request = {\n\t\t\t\tlocations: [],\n\t\t\t\toptions: {\n\t\t\t\t\t\"vehicle\": \"carfast\",\n\t\t\t\t\t\"optimization\": \"optimal\",\n\t\t\t\t\t\"language\": \"nl\",\n\t\t\t\t\t'includePolyline': true\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (var i = 0; i < waypoints.length; i++) {\n\t\t\t\trequest.locations.push({ coordinate: { x: waypoints[i].latLng.lng, y: waypoints[i].latLng.lat } });\n\t\t\t}\n\n\t\t\treturn request;\n\n\t\t},\n\n\t\t_convertInstructions: function(instructions, coordinates) {\n\t\t\tvar signToType = {\n\t\t\t\t'TURNHALFLEFT': 'SlightLeft',\n\t\t\t\t'TURNSHARPLEFT': 'SharpLeft',\n\t\t\t\t'TURNLEFT': 'Left',\n\t\t\t\t'CONTINUE': 'Straight',\n\t\t\t\t'TURNHALFRIGHT': 'SlightRight',\n\t\t\t\t'TURNRIGHT': 'Right',\n\t\t\t\t'TURNSHARPRIGHT': 'SharpRight',\n\t\t\t\t'ARRIVELEFT': 'DestinationReached',\n\t\t\t\t'ARRIVERIGHT': 'DestinationReached',\n\t\t\t\t'TAKEROUNDABOUTRIGHT': 'Roundabout',\n\t\t\t\t'TAKEROUNDABOUTLEFT': 'Roundabout'\n\t\t\t\t},\n\t\t\t\tresult = [],\n\t\t\t\ttype,\n\t\t\t\ti,\n\t\t\t\tinstr;\n\n\t\t\tfor (i = 0; instructions && i < instructions.length; i++) {\n\t\t\t\tinstr = instructions[i];\n\t\t\t\tif (!instr.description) continue;\n\t\t\t\tif (result.length === 0) {\n\t\t\t\t\ttype = 'Head';\n\t\t\t\t} else {\n\t\t\t\t\tif (i < instructions.length - 2 && ['ARRIVELEFT', 'ARRIVERIGHT'].includes(instr.maneuverType)) {\n\t\t\t\t\t\ttype = 'WaypointReached';\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttype = signToType[instr.maneuverType];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tresult.push({\n\t\t\t\t\ttype: type,\n\t\t\t\t\tmodifier: type,\n\t\t\t\t\ttext: instr.description,\n\t\t\t\t\tdistance: instr.accDistance,\n\t\t\t\t\ttime: instr.accTime,\n\t\t\t\t\tindex: coordinates.findIndex((c) => c.lat == instr.coordinate.y && c.lng == instr.coordinate.x),\n\t\t\t\t\texit: 0,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn result;\n\t\t},\n\n\t\t_mapWaypointIndices: function(waypoints, instructions, coordinates) {\n\t\t\tvar wps = [],\n\t\t\t\twpIndices = [],\n\t\t\t    i,\n\t\t\t    idx;\n\n\t\t\tfor (i = 0; instructions && i < instructions.length; i++) {\n\t\t\t\tif (instructions[i].event === 'WAYPOINT') {\n\t\t\t\t\tidx = coordinates.findIndex((c) => c.lat == instructions[i].coordinate.y && c.lng == instructions[i].coordinate.x);\n\t\t\t\t\twpIndices.push(idx);\n\t\t\t\t\twps.push({\n\t\t\t\t\t\tlatLng: coordinates[idx],\n\t\t\t\t\t\tname: waypoints[wps.length].name\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\n\t\t\treturn {\n\t\t\t\twaypointIndices: wpIndices,\n\t\t\t\twaypoints: wps\n\t\t\t};\n\t\t},\n\n\t\t_post: function (url, data, callback) {\n\t\t\tfetch(url, {\n\t\t\t\tmethod: 'POST',\n\t\t\t\theaders: {\n\t\t\t\t\t'Accept': 'application/json',\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t'X-API-KEY': this._apikey\n\t\t\t\t},\n\t\t\t\tbody: JSON.stringify(data)\n\t\t\t})\n\t\t\t\t.then(res => res.json())\n\t\t\t\t.then(res => callback(null, res));\n\t\t}\n\t});\n\n\tL.Routing.locatienet = function(apikey, options) {\n\t\treturn new L.Routing.Locatienet(apikey, options);\n\t};\n\n\tmodule.exports = L.Routing.Locatienet;\n}));\n\n"],"names":["L","require$$0","module","exports","Control","Geocoder","extend","options","showResultIcons","collapsed","expand","position","placeholder","errorMessage","_callbackId","initialize","Util","setOptions","this","geocoder","Nominatim","onAdd","map","input","className","container","DomUtil","create","icon","form","_form","_map","_container","_input","type","DomEvent","addListener","_keydown","_errorElement","document","createElement","innerHTML","_alts","appendChild","_geocode","e","button","detail","_toggle","_expand","_collapse","on","disableClickPropagation","_geocodeResult","results","removeClass","length","_geocodeResultSelected","_results","i","_createAlt","addClass","markGeocode","result","fitBounds","bbox","_geocodeMarker","removeLayer","Marker","center","bindPopup","html","name","addTo","openPopup","event","preventDefault","_clearResults","geocode","value","indexOf","select","replace","_selection","index","li","a","text","undefined","createTextNode","src","href","setAttribute","_this","dir","firstChild","keyCode","parseInt","getAttribute","id","callbackId","jsonp","url","params","callback","context","jsonpParam","window","bind","script","getParamString","getElementsByTagName","getJSON","xmlHttp","XMLHttpRequest","open","send","onreadystatechange","readyState","status","req","JSON","parse","response","template","str","data","htmlEscape","key","badChars","possible","escape","escapeChar","chr","string","test","factory","Locatienet","Class","service_url","_apikey","LN_API_KEY","query","cb","body","language","numresults","minimalResultScore","_post","err","loc","latLng","latLngBounds","coordinate","y","x","hasOwnProperty","slice","reverse","description","call","location","scale","lng","lat","fetch","method","headers","Accept","stringify","then","res","json","locatienet","apikey","Routing","Evented","serviceUrl","timeout","urlParameters","route","waypoints","timer","wp","timedOut","wps","buildRouteRequest","setTimeout","message","push","clearTimeout","fire","finalResponse","responseText","_routeDone","inputWaypoints","mappedWaypoints","coordinates","path","alts","_decodePolyline","polyline","_mapWaypointIndices","descriptions","instructions","_convertInstructions","summary","totalDistance","distance","totalTime","travelTime","totalAscend","actualWaypoints","waypointIndices","coords","latlngs","Array","LatLng","_toWaypoints","vias","request","locations","vehicle","optimization","includePolyline","instr","signToType","TURNHALFLEFT","TURNSHARPLEFT","TURNLEFT","CONTINUE","TURNHALFRIGHT","TURNRIGHT","TURNSHARPRIGHT","ARRIVELEFT","ARRIVERIGHT","TAKEROUNDABOUTRIGHT","TAKEROUNDABOUTLEFT","includes","maneuverType","modifier","accDistance","time","accTime","findIndex","c","exit","idx","wpIndices"],"mappings":"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"}