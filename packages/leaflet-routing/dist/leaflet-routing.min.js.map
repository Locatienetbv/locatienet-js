{"version":3,"file":"leaflet-routing.min.js","sources":["../src/Control.Geocoder.js","../src/Control.Geocoder.Locatienet.js","../src/Routing.Locatienet.js"],"sourcesContent":["(function (factory) {\r\n\t// Packaging/modules magic dance\r\n\tvar L;\r\n\tif (typeof define === 'function' && define.amd) {\r\n\t\t// AMD\r\n\t\tdefine(['leaflet'], factory);\r\n\t} else if (typeof module !== 'undefined') {\r\n\t\t// Node/CommonJS\r\n\t\tL = require('leaflet');\r\n\t\tmodule.exports = factory(L);\r\n\t} else {\r\n\t\t// Browser globals\r\n\t\tif (typeof window.L === 'undefined')\r\n\t\t\tthrow 'Leaflet must be loaded first';\r\n\t\tfactory(window.L);\r\n\t}\r\n}(function (L) {\r\n\t'use strict';\r\n\tL.Control.Geocoder = L.Control.extend({\r\n\t\toptions: {\r\n\t\t\tshowResultIcons: false,\r\n\t\t\tcollapsed: true,\r\n\t\t\texpand: 'click',\r\n\t\t\tposition: 'topright',\r\n\t\t\tplaceholder: 'Search...',\r\n\t\t\terrorMessage: 'Nothing found.'\r\n\t\t},\r\n\r\n\t\t_callbackId: 0,\r\n\r\n\t\tinitialize: function (options) {\r\n\t\t\tL.Util.setOptions(this, options);\r\n\t\t\tif (!this.options.geocoder) {\r\n\t\t\t\tthis.options.geocoder = new L.Control.Geocoder.Nominatim();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tonAdd: function (map) {\r\n\t\t\tvar className = 'leaflet-control-geocoder',\r\n\t\t\t    container = L.DomUtil.create('div', className),\r\n\t\t\t\ticon = L.DomUtil.create('div', 'leaflet-control-geocoder-icon', container),\r\n\t\t\t    form = this._form = L.DomUtil.create('form', className + '-form', container),\r\n\t\t\t    input;\r\n\r\n\t\t\tthis._map = map;\r\n\t\t\tthis._container = container;\r\n\t\t\tinput = this._input = L.DomUtil.create('input');\r\n\t\t\tinput.type = 'text';\r\n\t\t\tinput.placeholder = this.options.placeholder;\r\n\r\n\t\t\tL.DomEvent.addListener(input, 'keydown', this._keydown, this);\r\n\t\t\t//L.DomEvent.addListener(input, 'onpaste', this._clearResults, this);\r\n\t\t\t//L.DomEvent.addListener(input, 'oninput', this._clearResults, this);\r\n\r\n\t\t\tthis._errorElement = document.createElement('div');\r\n\t\t\tthis._errorElement.className = className + '-form-no-error';\r\n\t\t\tthis._errorElement.innerHTML = this.options.errorMessage;\r\n\r\n\t\t\tthis._alts = L.DomUtil.create('ul', className + '-alternatives leaflet-control-geocoder-alternatives-minimized');\r\n\r\n\t\t\tform.appendChild(input);\r\n\t\t\tform.appendChild(this._errorElement);\r\n\t\t\tcontainer.appendChild(this._alts);\r\n\r\n\t\t\tL.DomEvent.addListener(form, 'submit', this._geocode, this);\r\n\r\n\t\t\tif (this.options.collapsed) {\r\n\t\t\t\tif (this.options.expand === 'click') {\r\n\t\t\t\t\tL.DomEvent.addListener(icon, 'click', function(e) {\r\n\t\t\t\t\t\t// TODO: touch\r\n\t\t\t\t\t\tif (e.button === 0 && e.detail === 1) {\r\n\t\t\t\t\t\t\tthis._toggle();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, this);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tL.DomEvent.addListener(icon, 'mouseover', this._expand, this);\r\n\t\t\t\t\tL.DomEvent.addListener(icon, 'mouseout', this._collapse, this);\r\n\t\t\t\t\tthis._map.on('movestart', this._collapse, this);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis._expand();\r\n\t\t\t}\r\n\r\n\t\t\tL.DomEvent.disableClickPropagation(container);\r\n\r\n\t\t\treturn container;\r\n\t\t},\r\n\r\n\t\t_geocodeResult: function (results) {\r\n\t\t\tL.DomUtil.removeClass(this._container, 'leaflet-control-geocoder-throbber');\r\n\t\t\tif (results.length === 1) {\r\n\t\t\t\tthis._geocodeResultSelected(results[0]);\r\n\t\t\t} else if (results.length > 0) {\r\n\t\t\t\tthis._alts.innerHTML = '';\r\n\t\t\t\tthis._results = results;\r\n\t\t\t\tL.DomUtil.removeClass(this._alts, 'leaflet-control-geocoder-alternatives-minimized');\r\n\t\t\t\tfor (var i = 0; i < results.length; i++) {\r\n\t\t\t\t\tthis._alts.appendChild(this._createAlt(results[i], i));\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tL.DomUtil.addClass(this._errorElement, 'leaflet-control-geocoder-error');\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tmarkGeocode: function(result) {\r\n\t\t\tthis._map.fitBounds(result.bbox);\r\n\r\n\t\t\tif (this._geocodeMarker) {\r\n\t\t\t\tthis._map.removeLayer(this._geocodeMarker);\r\n\t\t\t}\r\n\r\n\t\t\tthis._geocodeMarker = new L.Marker(result.center)\r\n\t\t\t\t.bindPopup(result.html || result.name)\r\n\t\t\t\t.addTo(this._map)\r\n\t\t\t\t.openPopup();\r\n\r\n\t\t\treturn this;\r\n\t\t},\r\n\r\n\t\t_geocode: function(event) {\r\n\t\t\tL.DomEvent.preventDefault(event);\r\n\r\n\t\t\tL.DomUtil.addClass(this._container, 'leaflet-control-geocoder-throbber');\r\n\t\t\tthis._clearResults();\r\n\t\t\tthis.options.geocoder.geocode(this._input.value, this._geocodeResult, this);\r\n\r\n\t\t\treturn false;\r\n\t\t},\r\n\r\n\t\t_geocodeResultSelected: function(result) {\r\n\t\t\tif (this.options.collapsed) {\r\n\t\t\t\tthis._collapse();\r\n\t\t\t} else {\r\n\t\t\t\tthis._clearResults();\r\n\t\t\t}\r\n\t\t\tthis.markGeocode(result);\r\n\t\t},\r\n\r\n\t\t_toggle: function() {\r\n\t\t\tif (this._container.className.indexOf('leaflet-control-geocoder-expanded') >= 0) {\r\n\t\t\t\tthis._collapse();\r\n\t\t\t} else {\r\n\t\t\t\tthis._expand();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_expand: function () {\r\n\t\t\tL.DomUtil.addClass(this._container, 'leaflet-control-geocoder-expanded');\r\n\t\t\tthis._input.select();\r\n\t\t},\r\n\r\n\t\t_collapse: function () {\r\n\t\t\tthis._container.className = this._container.className.replace(' leaflet-control-geocoder-expanded', '');\r\n\t\t\tL.DomUtil.addClass(this._alts, 'leaflet-control-geocoder-alternatives-minimized');\r\n\t\t\tL.DomUtil.removeClass(this._errorElement, 'leaflet-control-geocoder-error');\r\n\t\t},\r\n\r\n\t\t_clearResults: function () {\r\n\t\t\tL.DomUtil.addClass(this._alts, 'leaflet-control-geocoder-alternatives-minimized');\r\n\t\t\tthis._selection = null;\r\n\t\t\tL.DomUtil.removeClass(this._errorElement, 'leaflet-control-geocoder-error');\r\n\t\t},\r\n\r\n\t\t_createAlt: function(result, index) {\r\n\t\t\tvar li = document.createElement('li'),\r\n\t\t\t    a = L.DomUtil.create('a', '', li),\r\n\t\t\t    icon = this.options.showResultIcons && result.icon ? L.DomUtil.create('img', '', a) : null,\r\n\t\t\t    text = result.html ? undefined : document.createTextNode(result.name);\r\n\r\n\t\t\tif (icon) {\r\n\t\t\t\ticon.src = result.icon;\r\n\t\t\t}\r\n\r\n\t\t\ta.href = '#';\r\n\t\t\ta.setAttribute('data-result-index', index);\r\n\r\n\t\t\tif (result.html) {\r\n\t\t\t\ta.innerHTML = result.html;\r\n\t\t\t} else {\r\n\t\t\t\ta.appendChild(text);\r\n\t\t\t}\r\n\r\n\t\t\tL.DomEvent.addListener(li, 'click', function clickHandler(e) {\r\n\t\t\t\tL.DomEvent.preventDefault(e);\r\n\t\t\t\tthis._geocodeResultSelected(result);\r\n\t\t\t}, this);\r\n\r\n\t\t\treturn li;\r\n\t\t},\r\n\r\n\t\t_keydown: function(e) {\r\n\t\t\tvar _this = this,\r\n\t\t\t\tselect = function select(dir) {\r\n\t\t\t\t\tif (_this._selection) {\r\n\t\t\t\t\t\tL.DomUtil.removeClass(_this._selection.firstChild, 'leaflet-control-geocoder-selected');\r\n\t\t\t\t\t\t_this._selection = _this._selection[dir > 0 ? 'nextSibling' : 'previousSibling'];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!_this._selection) {\r\n\t\t\t\t\t\t_this._selection = _this._alts[dir > 0 ? 'firstChild' : 'lastChild'];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (_this._selection) {\r\n\t\t\t\t\t\tL.DomUtil.addClass(_this._selection.firstChild, 'leaflet-control-geocoder-selected');\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\tswitch (e.keyCode) {\r\n\t\t\t// Escape\r\n\t\t\tcase 27:\r\n\t\t\t\tthis._collapse();\r\n\t\t\t\tbreak;\r\n\t\t\t// Up\r\n\t\t\tcase 38:\r\n\t\t\t\tselect(-1);\r\n\t\t\t\tL.DomEvent.preventDefault(e);\r\n\t\t\t\tbreak;\r\n\t\t\t// Up\r\n\t\t\tcase 40:\r\n\t\t\t\tselect(1);\r\n\t\t\t\tL.DomEvent.preventDefault(e);\r\n\t\t\t\tbreak;\r\n\t\t\t// Enter\r\n\t\t\tcase 13:\r\n\t\t\t\tif (this._selection) {\r\n\t\t\t\t\tvar index = parseInt(this._selection.firstChild.getAttribute('data-result-index'), 10);\r\n\t\t\t\t\tthis._geocodeResultSelected(this._results[index]);\r\n\t\t\t\t\tthis._clearResults();\r\n\t\t\t\t\tL.DomEvent.preventDefault(e);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\t});\r\n\r\n\tL.Control.geocoder = function(id, options) {\r\n\t\treturn new L.Control.Geocoder(id, options);\r\n\t};\r\n\r\n\tL.Control.Geocoder.callbackId = 0;\r\n\tL.Control.Geocoder.jsonp = function(url, params, callback, context, jsonpParam) {\r\n\t\tvar callbackId = '_l_geocoder_' + (L.Control.Geocoder.callbackId++);\r\n\t\tparams[jsonpParam || 'callback'] = callbackId;\r\n\t\twindow[callbackId] = L.Util.bind(callback, context);\r\n\t\tvar script = document.createElement('script');\r\n\t\tscript.type = 'text/javascript';\r\n\t\tscript.src = url + L.Util.getParamString(params);\r\n\t\tscript.id = callbackId;\r\n\t\tdocument.getElementsByTagName('head')[0].appendChild(script);\r\n\t};\r\n\tL.Control.Geocoder.getJSON = function(url, params, callback) {\r\n\t\tvar xmlHttp = new XMLHttpRequest();\r\n\t\txmlHttp.open( \"GET\", url + L.Util.getParamString(params), true);\r\n\t\txmlHttp.send(null);\r\n\t\txmlHttp.onreadystatechange = function () {\r\n\t\t\tif (xmlHttp.readyState != 4) return;\r\n\t\t\tif (xmlHttp.status != 200 && req.status != 304) return;\r\n\t\t\tcallback(JSON.parse(xmlHttp.response));\r\n\t\t};\r\n\t};\r\n\r\n\tL.Control.Geocoder.template = function (str, data, htmlEscape) {\r\n\t\treturn str.replace(/\\{ *([\\w_]+) *\\}/g, function (str, key) {\r\n\t\t\tvar value = data[key];\r\n\t\t\tif (value === undefined) {\r\n\t\t\t\tvalue = '';\r\n\t\t\t} else if (typeof value === 'function') {\r\n\t\t\t\tvalue = value(data);\r\n\t\t\t}\r\n\t\t\treturn L.Control.Geocoder.htmlEscape(value);\r\n\t\t});\r\n\t};\r\n\r\n\t// Adapted from handlebars.js\r\n\t// https://github.com/wycats/handlebars.js/\r\n\tL.Control.Geocoder.htmlEscape = (function() {\r\n\t\tvar badChars = /[&<>\"'`]/g;\r\n\t\tvar possible = /[&<>\"'`]/;\r\n\t\tvar escape = {\r\n\t\t  '&': '&amp;',\r\n\t\t  '<': '&lt;',\r\n\t\t  '>': '&gt;',\r\n\t\t  '\"': '&quot;',\r\n\t\t  '\\'': '&#x27;',\r\n\t\t  '`': '&#x60;'\r\n\t\t};\r\n\r\n\t\tfunction escapeChar(chr) {\r\n\t\t  return escape[chr];\r\n\t\t}\r\n\r\n\t\treturn function(string) {\r\n\t\t\tif (string == null) {\r\n\t\t\t\treturn '';\r\n\t\t\t} else if (!string) {\r\n\t\t\t\treturn string + '';\r\n\t\t\t}\r\n\r\n\t\t\t// Force a string conversion as this will be done by the append regardless and\r\n\t\t\t// the regex test will do this transparently behind the scenes, causing issues if\r\n\t\t\t// an object's to string has escaped characters in it.\r\n\t\t\tstring = '' + string;\r\n\r\n\t\t\tif (!possible.test(string)) {\r\n\t\t\t\treturn string;\r\n\t\t\t}\r\n\t\t\treturn string.replace(badChars, escapeChar);\r\n\t\t};\r\n\t})();\r\n\r\n\tL.Control.Geocoder.Nominatim = L.Class.extend({\r\n\t\toptions: {\r\n\t\t\tserviceUrl: '//nominatim.openstreetmap.org/',\r\n\t\t\tgeocodingQueryParams: {},\r\n\t\t\treverseQueryParams: {},\r\n\t\t\thtmlTemplate: function(r) {\r\n\t\t\t\tvar a = r.address,\r\n\t\t\t\t\tparts = [];\r\n\t\t\t\tif (a.road || a.building) {\r\n\t\t\t\t\tparts.push('{building} {road} {house_number}');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (a.city || a.town || a.village) {\r\n\t\t\t\t\tparts.push('<span class=\"' + (parts.length > 0 ? 'leaflet-control-geocoder-address-detail' : '') +\r\n\t\t\t\t\t\t'\">{postcode} {city}{town}{village}</span>');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (a.state || a.country) {\r\n\t\t\t\t\tparts.push('<span class=\"' + (parts.length > 0 ? 'leaflet-control-geocoder-address-context' : '') +\r\n\t\t\t\t\t\t'\">{state} {country}</span>');\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn L.Control.Geocoder.template(parts.join('<br/>'), a, true);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tinitialize: function(options) {\r\n\t\t\tL.Util.setOptions(this, options);\r\n\t\t},\r\n\r\n\t\tgeocode: function(query, cb, context) {\r\n\t\t\tL.Control.Geocoder.jsonp(this.options.serviceUrl + 'search/', L.extend({\r\n\t\t\t\tq: query,\r\n\t\t\t\tlimit: 5,\r\n\t\t\t\tformat: 'json',\r\n\t\t\t\taddressdetails: 1\r\n\t\t\t}, this.options.geocodingQueryParams),\r\n\t\t\tfunction(data) {\r\n\t\t\t\tvar results = [];\r\n\t\t\t\tfor (var i = data.length - 1; i >= 0; i--) {\r\n\t\t\t\t\tvar bbox = data[i].boundingbox;\r\n\t\t\t\t\tfor (var j = 0; j < 4; j++) bbox[j] = parseFloat(bbox[j]);\r\n\t\t\t\t\tresults[i] = {\r\n\t\t\t\t\t\ticon: data[i].icon,\r\n\t\t\t\t\t\tname: data[i].display_name,\r\n\t\t\t\t\t\thtml: this.options.htmlTemplate ?\r\n\t\t\t\t\t\t\tthis.options.htmlTemplate(data[i])\r\n\t\t\t\t\t\t\t: undefined,\r\n\t\t\t\t\t\tbbox: L.latLngBounds([bbox[0], bbox[2]], [bbox[1], bbox[3]]),\r\n\t\t\t\t\t\tcenter: L.latLng(data[i].lat, data[i].lon),\r\n\t\t\t\t\t\tproperties: data[i]\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\tcb.call(context, results);\r\n\t\t\t}, this, 'json_callback');\r\n\t\t},\r\n\r\n\t\treverse: function(location, scale, cb, context) {\r\n\t\t\tL.Control.Geocoder.jsonp(this.options.serviceUrl + 'reverse/', L.extend({\r\n\t\t\t\tlat: location.lat,\r\n\t\t\t\tlon: location.lng,\r\n\t\t\t\tzoom: Math.round(Math.log(scale / 256) / Math.log(2)),\r\n\t\t\t\taddressdetails: 1,\r\n\t\t\t\tformat: 'json'\r\n\t\t\t}, this.options.reverseQueryParams), function(data) {\r\n\t\t\t\tvar result = [],\r\n\t\t\t\t    loc;\r\n\r\n\t\t\t\tif (data && data.lat && data.lon) {\r\n\t\t\t\t\tloc = L.latLng(data.lat, data.lon);\r\n\t\t\t\t\tresult.push({\r\n\t\t\t\t\t\tname: data.display_name,\r\n\t\t\t\t\t\thtml: this.options.htmlTemplate ?\r\n\t\t\t\t\t\t\tthis.options.htmlTemplate(data)\r\n\t\t\t\t\t\t\t: undefined,\r\n\t\t\t\t\t\tcenter: loc,\r\n\t\t\t\t\t\tbounds: L.latLngBounds(loc, loc),\r\n\t\t\t\t\t\tproperties: data\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcb.call(context, result);\r\n\t\t\t}, this, 'json_callback');\r\n\t\t}\r\n\t});\r\n\r\n\tL.Control.Geocoder.nominatim = function(options) {\r\n\t\treturn new L.Control.Geocoder.Nominatim(options);\r\n\t};\r\n\r\n\tL.Control.Geocoder.Bing = L.Class.extend({\r\n\t\tinitialize: function(key) {\r\n\t\t\tthis.key = key;\r\n\t\t},\r\n\r\n\t\tgeocode : function (query, cb, context) {\r\n\t\t\tL.Control.Geocoder.jsonp('//dev.virtualearth.net/REST/v1/Locations', {\r\n\t\t\t\tquery: query,\r\n\t\t\t\tkey : this.key\r\n\t\t\t}, function(data) {\r\n\t\t\t\tvar results = [];\r\n\t\t\t\tfor (var i = data.resourceSets[0].resources.length - 1; i >= 0; i--) {\r\n\t\t\t\t\tvar resource = data.resourceSets[0].resources[i],\r\n\t\t\t\t\t\tbbox = resource.bbox;\r\n\t\t\t\t\tresults[i] = {\r\n\t\t\t\t\t\tname: resource.name,\r\n\t\t\t\t\t\tbbox: L.latLngBounds([bbox[0], bbox[1]], [bbox[2], bbox[3]]),\r\n\t\t\t\t\t\tcenter: L.latLng(resource.point.coordinates)\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\tcb.call(context, results);\r\n\t\t\t}, this, 'jsonp');\r\n\t\t},\r\n\r\n\t\treverse: function(location, scale, cb, context) {\r\n\t\t\tL.Control.Geocoder.jsonp('//dev.virtualearth.net/REST/v1/Locations/' + location.lat + ',' + location.lng, {\r\n\t\t\t\tkey : this.key\r\n\t\t\t}, function(data) {\r\n\t\t\t\tvar results = [];\r\n\t\t\t\tfor (var i = data.resourceSets[0].resources.length - 1; i >= 0; i--) {\r\n\t\t\t\t\tvar resource = data.resourceSets[0].resources[i],\r\n\t\t\t\t\t\tbbox = resource.bbox;\r\n\t\t\t\t\tresults[i] = {\r\n\t\t\t\t\t\tname: resource.name,\r\n\t\t\t\t\t\tbbox: L.latLngBounds([bbox[0], bbox[1]], [bbox[2], bbox[3]]),\r\n\t\t\t\t\t\tcenter: L.latLng(resource.point.coordinates)\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\tcb.call(context, results);\r\n\t\t\t}, this, 'jsonp');\r\n\t\t}\r\n\t});\r\n\r\n\tL.Control.Geocoder.bing = function(key) {\r\n\t\treturn new L.Control.Geocoder.Bing(key);\r\n\t};\r\n\r\n\tL.Control.Geocoder.RaveGeo = L.Class.extend({\r\n\t\toptions: {\r\n\t\t\tquerySuffix: '',\r\n\t\t\tdeepSearch: true,\r\n\t\t\twordBased: false\r\n\t\t},\r\n\r\n\t\tjsonp: function(params, callback, context) {\r\n\t\t\tvar callbackId = '_l_geocoder_' + (L.Control.Geocoder.callbackId++),\r\n\t\t\t\tparamParts = [];\r\n\t\t\tparams.prepend = callbackId + '(';\r\n\t\t\tparams.append = ')';\r\n\t\t\tfor (var p in params) {\r\n\t\t\t\tparamParts.push(p + '=' + escape(params[p]));\r\n\t\t\t}\r\n\r\n\t\t\twindow[callbackId] = L.Util.bind(callback, context);\r\n\t\t\tvar script = document.createElement('script');\r\n\t\t\tscript.type = 'text/javascript';\r\n\t\t\tscript.src = this._serviceUrl + '?' + paramParts.join('&');\r\n\t\t\tscript.id = callbackId;\r\n\t\t\tdocument.getElementsByTagName('head')[0].appendChild(script);\r\n\t\t},\r\n\r\n\t\tinitialize: function(serviceUrl, scheme, options) {\r\n\t\t\tL.Util.setOptions(this, options);\r\n\r\n\t\t\tthis._serviceUrl = serviceUrl;\r\n\t\t\tthis._scheme = scheme;\r\n\t\t},\r\n\r\n\t\tgeocode: function(query, cb, context) {\r\n\t\t\tL.Control.Geocoder.jsonp(this._serviceUrl, {\r\n\t\t\t\taddress: query + this.options.querySuffix,\r\n\t\t\t\tscheme: this._scheme,\r\n\t\t\t\toutputFormat: 'jsonp',\r\n\t\t\t\tdeepSearch: this.options.deepSearch,\r\n\t\t\t\twordBased: this.options.wordBased\r\n\t\t\t}, function(data) {\r\n\t\t\t\tvar results = [];\r\n\t\t\t\tfor (var i = data.length - 1; i >= 0; i--) {\r\n\t\t\t\t\tvar r = data[i],\r\n\t\t\t\t\t\tc = L.latLng(r.y, r.x);\r\n\t\t\t\t\tresults[i] = {\r\n\t\t\t\t\t\tname: r.address,\r\n\t\t\t\t\t\tbbox: L.latLngBounds([c]),\r\n\t\t\t\t\t\tcenter: c\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\tcb.call(context, results);\r\n\t\t\t}, this);\r\n\t\t}\r\n\t});\r\n\r\n\tL.Control.Geocoder.raveGeo = function(serviceUrl, scheme, options) {\r\n\t\treturn new L.Control.Geocoder.RaveGeo(serviceUrl, scheme, options);\r\n\t};\r\n\r\n\tL.Control.Geocoder.MapQuest = L.Class.extend({\r\n\t\tinitialize: function(key) {\r\n\t\t\t// MapQuest seems to provide URI encoded API keys,\r\n\t\t\t// so to avoid encoding them twice, we decode them here\r\n\t\t\tthis._key = decodeURIComponent(key);\r\n\t\t},\r\n\r\n\t\t_formatName: function() {\r\n\t\t\tvar r = [],\r\n\t\t\t\ti;\r\n\t\t\tfor (i = 0; i < arguments.length; i++) {\r\n\t\t\t\tif (arguments[i]) {\r\n\t\t\t\t\tr.push(arguments[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn r.join(', ');\r\n\t\t},\r\n\r\n\t\tgeocode: function(query, cb, context) {\r\n\t\t\tL.Control.Geocoder.jsonp('//www.mapquestapi.com/geocoding/v1/address', {\r\n\t\t\t\tkey: this._key,\r\n\t\t\t\tlocation: query,\r\n\t\t\t\tlimit: 5,\r\n\t\t\t\toutFormat: 'json'\r\n\t\t\t}, function(data) {\r\n\t\t\t\tvar results = [],\r\n\t\t\t\t\tloc,\r\n\t\t\t\t\tlatLng;\r\n\t\t\t\tif (data.results && data.results[0].locations) {\r\n\t\t\t\t\tfor (var i = data.results[0].locations.length - 1; i >= 0; i--) {\r\n\t\t\t\t\t\tloc = data.results[0].locations[i];\r\n\t\t\t\t\t\tlatLng = L.latLng(loc.latLng);\r\n\t\t\t\t\t\tresults[i] = {\r\n\t\t\t\t\t\t\tname: this._formatName(loc.street, loc.adminArea4, loc.adminArea3, loc.adminArea1),\r\n\t\t\t\t\t\t\tbbox: L.latLngBounds(latLng, latLng),\r\n\t\t\t\t\t\t\tcenter: latLng\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcb.call(context, results);\r\n\t\t\t}, this);\r\n\t\t},\r\n\r\n\t\treverse: function(location, scale, cb, context) {\r\n\t\t\tL.Control.Geocoder.jsonp('//www.mapquestapi.com/geocoding/v1/reverse', {\r\n\t\t\t\tkey: this._key,\r\n\t\t\t\tlocation: location.lat + ',' + location.lng,\r\n\t\t\t\toutputFormat: 'json'\r\n\t\t\t}, function(data) {\r\n\t\t\t\tvar results = [],\r\n\t\t\t\t\tloc,\r\n\t\t\t\t\tlatLng;\r\n\t\t\t\tif (data.results && data.results[0].locations) {\r\n\t\t\t\t\tfor (var i = data.results[0].locations.length - 1; i >= 0; i--) {\r\n\t\t\t\t\t\tloc = data.results[0].locations[i];\r\n\t\t\t\t\t\tlatLng = L.latLng(loc.latLng);\r\n\t\t\t\t\t\tresults[i] = {\r\n\t\t\t\t\t\t\tname: this._formatName(loc.street, loc.adminArea4, loc.adminArea3, loc.adminArea1),\r\n\t\t\t\t\t\t\tbbox: L.latLngBounds(latLng, latLng),\r\n\t\t\t\t\t\t\tcenter: latLng\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcb.call(context, results);\r\n\t\t\t}, this);\r\n\t\t}\r\n\t});\r\n\r\n\tL.Control.Geocoder.mapQuest = function(key) {\r\n\t\treturn new L.Control.Geocoder.MapQuest(key);\r\n\t};\r\n\r\n\tL.Control.Geocoder.Mapbox = L.Class.extend({\r\n\t\toptions: {\r\n\t\t\tservice_url: 'https://api.tiles.mapbox.com/v4/geocode/mapbox.places-v1/'\r\n\t\t},\r\n\r\n\t\tinitialize: function(access_token) {\r\n\t\t\tthis._access_token = access_token;\r\n\t\t},\r\n\r\n\t\tgeocode: function(query, cb, context) {\r\n\t\t\tL.Control.Geocoder.getJSON(this.options.service_url + encodeURIComponent(query) + '.json', {\r\n\t\t\t\taccess_token: this._access_token,\r\n\t\t\t}, function(data) {\r\n\t\t\t\tvar results = [],\r\n\t\t\t\tloc,\r\n\t\t\t\tlatLng,\r\n\t\t\t\tlatLngBounds;\r\n\t\t\t\tif (data.features && data.features.length) {\r\n\t\t\t\t\tfor (var i = 0; i <= data.features.length - 1; i++) {\r\n\t\t\t\t\t\tloc = data.features[i];\r\n\t\t\t\t\t\tlatLng = L.latLng(loc.center.reverse());\r\n\t\t\t\t\t\tif(loc.hasOwnProperty('bbox'))\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tlatLngBounds = L.latLngBounds(L.latLng(loc.bbox.slice(0, 2).reverse()), L.latLng(loc.bbox.slice(2, 4).reverse()));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tlatLngBounds = L.latLngBounds(latLng, latLng);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tresults[i] = {\r\n\t\t\t\t\t\t\t\tname: loc.place_name,\r\n\t\t\t\t\t\t\t\tbbox: latLngBounds,\r\n\t\t\t\t\t\t\t\tcenter: latLng\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tcb.call(context, results);\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\treverse: function(location, scale, cb, context) {\r\n\t\t\tL.Control.Geocoder.getJSON(this.options.service_url + encodeURIComponent(location.lng) + ',' + encodeURIComponent(location.lat) + '.json', {\r\n\t\t\t\taccess_token: this._access_token,\r\n\t\t\t}, function(data) {\r\n\t\t\t\tvar results = [],\r\n\t\t\t\tloc,\r\n\t\t\t\tlatLng,\r\n\t\t\t\tlatLngBounds;\r\n\t\t\t\tif (data.features && data.features.length) {\r\n\t\t\t\t\tfor (var i = 0; i <= data.features.length - 1; i++) {\r\n\t\t\t\t\t\tloc = data.features[i];\r\n\t\t\t\t\t\tlatLng = L.latLng(loc.center.reverse());\r\n\t\t\t\t\t\tif(loc.hasOwnProperty('bbox'))\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tlatLngBounds = L.latLngBounds(L.latLng(loc.bbox.slice(0, 2).reverse()), L.latLng(loc.bbox.slice(2, 4).reverse()));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tlatLngBounds = L.latLngBounds(latLng, latLng);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tresults[i] = {\r\n\t\t\t\t\t\t\tname: loc.place_name,\r\n\t\t\t\t\t\t\tbbox: latLngBounds,\r\n\t\t\t\t\t\t\tcenter: latLng\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcb.call(context, results);\r\n\t\t\t});\r\n\t\t}\r\n\t});\r\n\r\n\tL.Control.Geocoder.mapbox = function(access_token) {\r\n\t\t\treturn new L.Control.Geocoder.Mapbox(access_token);\r\n\t};\r\n\r\n\tL.Control.Geocoder.Google = L.Class.extend({\r\n\t\toptions: {\r\n\t\t\tservice_url: 'https://maps.googleapis.com/maps/api/geocode/json'\r\n\t\t},\r\n\r\n\t\tinitialize: function(key) {\r\n\t\t\t\tthis._key = key;\r\n\t\t},\r\n\r\n\t\tgeocode: function(query, cb, context) {\r\n\t\t\tvar params = {\r\n\t\t\t\taddress: query,\r\n\t\t\t};\r\n\t\t\tif(this._key && this._key.length)\r\n\t\t\t{\r\n\t\t\t\tparams['key'] = this._key\r\n\t\t\t}\r\n\r\n\t\t\tL.Control.Geocoder.getJSON(this.options.service_url, params, function(data) {\r\n\t\t\t\t\tvar results = [],\r\n\t\t\t\t\t\t\tloc,\r\n\t\t\t\t\t\t\tlatLng,\r\n\t\t\t\t\t\t\tlatLngBounds;\r\n\t\t\t\t\tif (data.results && data.results.length) {\r\n\t\t\t\t\t\tfor (var i = 0; i <= data.results.length - 1; i++) {\r\n\t\t\t\t\t\t\tloc = data.results[i];\r\n\t\t\t\t\t\t\tlatLng = L.latLng(loc.geometry.location);\r\n\t\t\t\t\t\t\tlatLngBounds = L.latLngBounds(L.latLng(loc.geometry.viewport.northeast), L.latLng(loc.geometry.viewport.southwest));\r\n\t\t\t\t\t\t\tresults[i] = {\r\n\t\t\t\t\t\t\t\t\tname: loc.formatted_address,\r\n\t\t\t\t\t\t\t\t\tbbox: latLngBounds,\r\n\t\t\t\t\t\t\t\t\tcenter: latLng\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tcb.call(context, results);\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\treverse: function(location, scale, cb, context) {\r\n\t\t\tvar params = {\r\n\t\t\t\tlatlng: encodeURIComponent(location.lat) + ',' + encodeURIComponent(location.lng)\r\n\t\t\t};\r\n\t\t\tif(this._key && this._key.length)\r\n\t\t\t{\r\n\t\t\t\tparams['key'] = this._key\r\n\t\t\t}\r\n\t\t\tL.Control.Geocoder.getJSON(this.options.service_url, params, function(data) {\r\n\t\t\t\tvar results = [],\r\n\t\t\t\t\t\tloc,\r\n\t\t\t\t\t\tlatLng,\r\n\t\t\t\t\t\tlatLngBounds;\r\n\t\t\t\tif (data.results && data.results.length) {\r\n\t\t\t\t\tfor (var i = 0; i <= data.results.length - 1; i++) {\r\n\t\t\t\t\t\tloc = data.results[i];\r\n\t\t\t\t\t\tlatLng = L.latLng(loc.geometry.location);\r\n\t\t\t\t\t\tlatLngBounds = L.latLngBounds(L.latLng(loc.geometry.viewport.northeast), L.latLng(loc.geometry.viewport.southwest));\r\n\t\t\t\t\t\tresults[i] = {\r\n\t\t\t\t\t\t\tname: loc.formatted_address,\r\n\t\t\t\t\t\t\tbbox: latLngBounds,\r\n\t\t\t\t\t\t\tcenter: latLng\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcb.call(context, results);\r\n\t\t\t});\r\n\t\t}\r\n\t});\r\n\r\n\tL.Control.Geocoder.google = function(key) {\r\n\t\treturn new L.Control.Geocoder.Google(key);\r\n\t};\r\n\treturn L.Control.Geocoder;\r\n}));\r\n","(function (factory) {\r\n\t// Packaging/modules magic dance\r\n\tvar L;\r\n\tif (typeof define === 'function' && define.amd) {\r\n\t\t// AMD\r\n\t\tdefine(['leaflet'], factory);\r\n\t} else if (typeof module !== 'undefined') {\r\n\t\t// Node/CommonJS\r\n\t\tL = require('leaflet');\r\n\t\tmodule.exports = factory(L);\r\n\t} else {\r\n\t\t// Browser globals\r\n\t\tif (typeof window.L === 'undefined')\r\n\t\t\tthrow 'Leaflet must be loaded first';\r\n\t\tfactory(window.L);\r\n\t}\r\n}(function (L) {\r\n\t'use strict';\r\n\r\n\tL.Control.Geocoder.Locatienet = L.Class.extend({\r\n\t\toptions: {\r\n\t\t\tservice_url: 'https://services.locatienet.com/rs/v1/Locate/'\r\n\t\t},\r\n\r\n\t\tinitialize: function(apikey) {\r\n\t\t\tthis._apikey = apikey;\r\n\t\t},\r\n\r\n\t\tgeocode: function (query, cb, context) {\r\n\t\t\tconst body = {\r\n\t\t\t\ttext: query,\r\n\t\t\t\toptions: {\r\n\t\t\t\t\tlanguage: 'nl',\r\n\t\t\t\t\tnumresults: 5\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\tthis._post(this.options.service_url + 'searchByText', body, function(data) {\r\n\t\t\t\tvar results = [],\r\n\t\t\t\tloc,\r\n\t\t\t\tlatLng,\r\n\t\t\t\tlatLngBounds;\r\n\t\t\t\tif (data && data.length) {\r\n\t\t\t\t\tfor (var i = 0; i <= data.length - 1; i++) {\r\n\t\t\t\t\t\tloc = data[i];\r\n\t\t\t\t\t\tlatLng = L.latLng(loc.coordinate.y, loc.coordinate.x);\r\n\t\t\t\t\t\tif(loc.hasOwnProperty('bbox'))\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tlatLngBounds = L.latLngBounds(L.latLng(loc.bbox.slice(0, 2).reverse()), L.latLng(loc.bbox.slice(2, 4).reverse()));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tlatLngBounds = L.latLngBounds(latLng, latLng);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tresults[i] = {\r\n\t\t\t\t\t\t\t\tname: loc.description,\r\n\t\t\t\t\t\t\t\tbbox: latLngBounds,\r\n\t\t\t\t\t\t\t\tcenter: latLng\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tcb.call(context, results);\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\treverse: function (location, scale, cb, context) {\r\n\r\n\t\t\tvar body = {\r\n\t\t\t\tcoordinate: { x: location.lng, y: location.lat },\r\n\t\t\t\toptions: { numresults: 5}\r\n\t\t\t}\r\n\r\n\t\t\tthis._post(this.options.service_url + 'searchByPosition', body, function(err, data) {\r\n\t\t\t\tvar results = [],\r\n\t\t\t\tloc,\r\n\t\t\t\tlatLng,\r\n\t\t\t\tlatLngBounds;\r\n\t\t\t\tif (data && data.length) {\r\n\t\t\t\t\tfor (var i = 0; i <= data.length - 1; i++) {\r\n\t\t\t\t\t\tloc = data[i];\r\n\t\t\t\t\t\tlatLng = L.latLng(loc.coordinate.y, loc.coordinate.x);\r\n\t\t\t\t\t\tif(loc.hasOwnProperty('bbox'))\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tlatLngBounds = L.latLngBounds(L.latLng(loc.bbox.slice(0, 2).reverse()), L.latLng(loc.bbox.slice(2, 4).reverse()));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tlatLngBounds = L.latLngBounds(latLng, latLng);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tresults[i] = {\r\n\t\t\t\t\t\t\tname: loc.description,\r\n\t\t\t\t\t\t\tbbox: latLngBounds,\r\n\t\t\t\t\t\t\tcenter: latLng\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcb.call(context, results);\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t_post: function (url, data, callback) {\r\n\t\t\tfetch(url, {\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t'Accept': 'application/json',\r\n\t\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t\t'X-API-KEY': this._apikey\r\n\t\t\t\t},\r\n\t\t\t\tbody: JSON.stringify(data)\r\n\t\t\t})\r\n\t\t\t\t.then(res => res.json())\r\n\t\t\t\t.then(res => callback(null, res));\r\n\t\t}\r\n\t});\r\n\r\n\tL.Control.Geocoder.locatienet = function(apikey) {\r\n\t\t\treturn new L.Control.Geocoder.Locatienet(apikey);\r\n\t};\r\n\r\n}));\r\n","(function (factory) {\r\n\t// Packaging/modules magic dance\r\n\tvar L;\r\n\tif (typeof define === 'function' && define.amd) {\r\n\t\t// AMD\r\n\t\tdefine(['leaflet'], factory);\r\n\t} else if (typeof module !== 'undefined') {\r\n\t\t// Node/CommonJS\r\n\t\tL = require('leaflet');\r\n\t\tmodule.exports = factory(L);\r\n\t} else {\r\n\t\t// Browser globals\r\n\t\tif (typeof window.L === 'undefined')\r\n\t\t\tthrow 'Leaflet must be loaded first';\r\n\t\tfactory(window.L);\r\n\t}\r\n}(function (L) {\r\n\t\r\n\t'use strict';\r\n\r\n\tvar L = require('leaflet');\r\n\r\n\tL.Routing = L.Routing || {};\r\n\r\n\tL.Routing.Locatienet = L.Evented.extend({\r\n\t\toptions: {\r\n\t\t\tserviceUrl: 'https://services.locatienet.com/rs/v1/Route/calculateRouteDescription',\r\n\t\t\ttimeout: 30 * 1000,\r\n\t\t\turlParameters: {}\r\n\t\t},\r\n\r\n\t\tinitialize: function(apikey, options) {\r\n\t\t\tthis._apikey = apikey;\r\n\t\t\tL.Util.setOptions(this, options);\r\n\t\t},\r\n\r\n\t\troute: function(waypoints, callback, context, options) {\r\n\t\t\tvar timedOut = false,\r\n\t\t\t\twps = [],\r\n\t\t\t\tbody,\r\n\t\t\t\ttimer,\r\n\t\t\t\twp,\r\n\t\t\t\ti;\r\n\r\n\t\t\toptions = options || {};\r\n\t\t\tbody = this.buildRouteRequest(waypoints, options);\r\n\r\n\t\t\ttimer = setTimeout(function() {\r\n\t\t\t\t\t\t\t\ttimedOut = true;\r\n\t\t\t\t\t\t\t\tcallback.call(context || callback, {\r\n\t\t\t\t\t\t\t\t\tstatus: -1,\r\n\t\t\t\t\t\t\t\t\tmessage: 'Locatienet request timed out.'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}, this.options.timeout);\r\n\r\n\t\t\t// Create a copy of the waypoints, since they\r\n\t\t\t// might otherwise be asynchronously modified while\r\n\t\t\t// the request is being processed.\r\n\t\t\tfor (i = 0; i < waypoints.length; i++) {\r\n\t\t\t\twp = waypoints[i];\r\n\t\t\t\twps.push({\r\n\t\t\t\t\tlatLng: wp.latLng,\r\n\t\t\t\t\tname: wp.name,\r\n\t\t\t\t\toptions: wp.options\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tthis._post(this.options.serviceUrl, body, L.bind(function(err, data) {\r\n\t\t\t\t\r\n\r\n\t\t\t\tclearTimeout(timer);\r\n\t\t\t\tif (!timedOut) {\r\n\t\t\t\t\tvar fired = err ? err : data;\r\n\t\t\t\t\tthis.fire(\"response\", {\r\n\t\t\t\t\t\t//status: fired.status,\r\n\t\t\t\t\t\t//limit: Number(fired.getResponseHeader(\"X-RateLimit-Limit\")),\r\n\t\t\t\t\t\t//remaining: Number(fired.getResponseHeader(\"X-RateLimit-Remaining\")),\r\n\t\t\t\t\t\t//reset: Number(fired.getResponseHeader(\"X-RateLimit-Reset\")),\r\n\t\t\t\t\t\t//credits: Number(fired.getResponseHeader(\"X-RateLimit-Credits\"))\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (!err) {\r\n\t\t\t\t\t\tthis._routeDone(data, wps, callback, context);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar finalResponse;\r\n\t\t\t\t\t\tvar responseText = err && err.responseText;\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tfinalResponse = JSON.parse(responseText);\r\n\t\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\t\tfinalResponse = responseText;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tcallback.call(context || callback, {\r\n\t\t\t\t\t\t\tstatus: -1,\r\n\t\t\t\t\t\t\tmessage: 'HTTP request failed: ' + err,\r\n\t\t\t\t\t\t\tresponse: finalResponse\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}, this));\r\n\r\n\t\t\treturn this;\r\n\t\t},\r\n\r\n\t\t_routeDone: function(response, inputWaypoints, callback, context) {\r\n\t\t\tvar alts = [],\r\n\t\t\t    mappedWaypoints,\r\n\t\t\t    coordinates,\r\n\t\t\t    i,\r\n\t\t\t    path;\r\n\r\n\t\t\tcontext = context || callback;\r\n\t\t\tpath = response;\r\n\t\t\tcoordinates = this._decodePolyline(path.polyline);\r\n\t\t\tmappedWaypoints =\r\n\t\t\t\tthis._mapWaypointIndices(inputWaypoints, path.descriptions, coordinates);\r\n\r\n\t\t\talts.push({\r\n\t\t\t\tname: '',\r\n\t\t\t\tcoordinates: coordinates,\r\n\t\t\t\tinstructions: this._convertInstructions(path.descriptions, coordinates),\r\n\t\t\t\tsummary: {\r\n\t\t\t\t\ttotalDistance: path.distance,\r\n\t\t\t\t\ttotalTime: path.travelTime,\r\n\t\t\t\t\ttotalAscend: 0,\r\n\t\t\t\t},\r\n\t\t\t\tinputWaypoints: inputWaypoints,\r\n\t\t\t\tactualWaypoints: mappedWaypoints.waypoints,\r\n\t\t\t\twaypointIndices: mappedWaypoints.waypointIndices\r\n\t\t\t});\r\n\t\t\t\r\n\r\n\t\t\tcallback.call(context, null, alts);\r\n\t\t},\r\n\r\n\t\t_decodePolyline: function(coords) {\r\n\t\t\tvar latlngs = new Array(coords.length),\r\n\t\t\t\ti;\r\n\t\t\tfor (i = 0; i < coords.length; i++) {\r\n\t\t\t\tlatlngs[i] = new L.LatLng(coords[i].y, coords[i].x);\r\n\t\t\t}\r\n\r\n\t\t\treturn latlngs;\r\n\t\t},\r\n\r\n\t\t_toWaypoints: function(inputWaypoints, vias) {\r\n\t\t\tvar wps = [],\r\n\t\t\t    i;\r\n\t\t\tfor (i = 0; i < vias.length; i++) {\r\n\t\t\t\twps.push({\r\n\t\t\t\t\tlatLng: L.latLng(vias[i]),\r\n\t\t\t\t\tname: inputWaypoints[i].name,\r\n\t\t\t\t\toptions: inputWaypoints[i].options\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\treturn wps;\r\n\t\t},\r\n\r\n\t\tbuildRouteRequest: function(waypoints, options) {\r\n\t\t\tvar request = {\r\n\t\t\t\tlocations: [],\r\n\t\t\t\toptions: {\r\n\t\t\t\t\t\"vehicle\": \"carfast\",\r\n\t\t\t\t\t\"optimization\": \"optimal\",\r\n\t\t\t\t\t\"language\": \"nl\",\r\n\t\t\t\t\t'includePolyline': true\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0; i < waypoints.length; i++) {\r\n\t\t\t\trequest.locations.push({ coordinate: { x: waypoints[i].latLng.lng, y: waypoints[i].latLng.lat } });\r\n\t\t\t}\r\n\r\n\t\t\treturn request;\r\n\r\n\t\t},\r\n\r\n\t\t_convertInstructions: function(instructions, coordinates) {\r\n\t\t\tvar signToType = {\r\n\t\t\t\t'TURNHALFLEFT': 'SlightLeft',\r\n\t\t\t\t'TURNSHARPLEFT': 'SharpLeft',\r\n\t\t\t\t'TURNLEFT': 'Left',\r\n\t\t\t\t'CONTINUE': 'Straight',\r\n\t\t\t\t'TURNHALFRIGHT': 'SlightRight',\r\n\t\t\t\t'TURNRIGHT': 'Right',\r\n\t\t\t\t'TURNSHARPRIGHT': 'SharpRight',\r\n\t\t\t\t'ARRIVELEFT': 'DestinationReached',\r\n\t\t\t\t'ARRIVERIGHT': 'DestinationReached',\r\n\t\t\t\t'TAKEROUNDABOUTRIGHT': 'Roundabout',\r\n\t\t\t\t'TAKEROUNDABOUTLEFT': 'Roundabout'\r\n\t\t\t\t},\r\n\t\t\t\tresult = [],\r\n\t\t\t\ttype,\r\n\t\t\t\ti,\r\n\t\t\t\tinstr;\r\n\r\n\t\t\tfor (i = 0; instructions && i < instructions.length; i++) {\r\n\t\t\t\tinstr = instructions[i];\r\n\t\t\t\tif (!instr.description) continue;\r\n\t\t\t\tif (result.length === 0) {\r\n\t\t\t\t\ttype = 'Head';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (i < instructions.length - 2 && ['ARRIVELEFT', 'ARRIVERIGHT'].includes(instr.maneuverType)) {\r\n\t\t\t\t\t\ttype = 'WaypointReached';\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ttype = signToType[instr.maneuverType];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tresult.push({\r\n\t\t\t\t\ttype: type,\r\n\t\t\t\t\tmodifier: type,\r\n\t\t\t\t\ttext: instr.description,\r\n\t\t\t\t\tdistance: instr.accDistance,\r\n\t\t\t\t\ttime: instr.accTime,\r\n\t\t\t\t\tindex: coordinates.findIndex((c) => c.lat == instr.coordinate.y && c.lng == instr.coordinate.x),\r\n\t\t\t\t\texit: 0,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\treturn result;\r\n\t\t},\r\n\r\n\t\t_mapWaypointIndices: function(waypoints, instructions, coordinates) {\r\n\t\t\tvar wps = [],\r\n\t\t\t\twpIndices = [],\r\n\t\t\t    i,\r\n\t\t\t    idx;\r\n\r\n\t\t\tfor (i = 0; instructions && i < instructions.length; i++) {\r\n\t\t\t\tif (instructions[i].event === 'WAYPOINT') {\r\n\t\t\t\t\tidx = coordinates.findIndex((c) => c.lat == instructions[i].coordinate.y && c.lng == instructions[i].coordinate.x);\r\n\t\t\t\t\twpIndices.push(idx);\r\n\t\t\t\t\twps.push({\r\n\t\t\t\t\t\tlatLng: coordinates[idx],\r\n\t\t\t\t\t\tname: waypoints[wps.length].name\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\treturn {\r\n\t\t\t\twaypointIndices: wpIndices,\r\n\t\t\t\twaypoints: wps\r\n\t\t\t};\r\n\t\t},\r\n\r\n\t\t_post: function (url, data, callback) {\r\n\t\t\tfetch(url, {\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t'Accept': 'application/json',\r\n\t\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t\t'X-API-KEY': this._apikey\r\n\t\t\t\t},\r\n\t\t\t\tbody: JSON.stringify(data)\r\n\t\t\t})\r\n\t\t\t\t.then(res => res.json())\r\n\t\t\t\t.then(res => callback(null, res));\r\n\t\t}\r\n\t});\r\n\r\n\tL.Routing.locatienet = function(apikey, options) {\r\n\t\treturn new L.Routing.Locatienet(apikey, options);\r\n\t};\r\n\r\n\tmodule.exports = L.Routing.Locatienet;\r\n}));\r\n\r\n"],"names":["L","require$$0","module","exports","Control","Geocoder","extend","options","showResultIcons","collapsed","expand","position","placeholder","errorMessage","_callbackId","initialize","Util","setOptions","this","geocoder","Nominatim","onAdd","map","input","className","container","DomUtil","create","icon","form","_form","_map","_container","_input","type","DomEvent","addListener","_keydown","_errorElement","document","createElement","innerHTML","_alts","appendChild","_geocode","e","button","detail","_toggle","_expand","_collapse","on","disableClickPropagation","_geocodeResult","results","removeClass","length","_geocodeResultSelected","_results","i","_createAlt","addClass","markGeocode","result","fitBounds","bbox","_geocodeMarker","removeLayer","Marker","center","bindPopup","html","name","addTo","openPopup","event","preventDefault","_clearResults","geocode","value","indexOf","select","replace","_selection","index","li","a","text","undefined","createTextNode","src","href","setAttribute","_this","dir","firstChild","keyCode","parseInt","getAttribute","id","callbackId","jsonp","url","params","callback","context","jsonpParam","window","bind","script","getParamString","getElementsByTagName","getJSON","xmlHttp","XMLHttpRequest","open","send","onreadystatechange","readyState","status","req","JSON","parse","response","template","str","data","htmlEscape","key","badChars","possible","escape","escapeChar","chr","string","test","Class","serviceUrl","geocodingQueryParams","reverseQueryParams","htmlTemplate","r","address","parts","road","building","push","city","town","village","state","country","join","query","cb","q","limit","format","addressdetails","boundingbox","j","parseFloat","display_name","latLngBounds","latLng","lat","lon","properties","call","reverse","location","scale","lng","zoom","Math","round","log","loc","bounds","nominatim","Bing","resourceSets","resources","resource","point","coordinates","bing","RaveGeo","querySuffix","deepSearch","wordBased","paramParts","p","prepend","append","_serviceUrl","scheme","_scheme","outputFormat","c","y","x","raveGeo","MapQuest","_key","decodeURIComponent","_formatName","arguments","outFormat","locations","street","adminArea4","adminArea3","adminArea1","mapQuest","Mapbox","service_url","access_token","_access_token","encodeURIComponent","features","hasOwnProperty","slice","place_name","mapbox","Google","geometry","viewport","northeast","southwest","formatted_address","latlng","google","factory","Locatienet","apikey","_apikey","body","language","numresults","_post","coordinate","description","err","fetch","method","headers","Accept","stringify","then","res","json","locatienet","Routing","Evented","timeout","urlParameters","route","waypoints","timer","wp","timedOut","wps","buildRouteRequest","setTimeout","message","clearTimeout","fire","finalResponse","responseText","_routeDone","inputWaypoints","mappedWaypoints","path","alts","_decodePolyline","polyline","_mapWaypointIndices","descriptions","instructions","_convertInstructions","summary","totalDistance","distance","totalTime","travelTime","totalAscend","actualWaypoints","waypointIndices","coords","latlngs","Array","LatLng","_toWaypoints","vias","request","vehicle","optimization","includePolyline","instr","signToType","TURNHALFLEFT","TURNSHARPLEFT","TURNLEFT","CONTINUE","TURNHALFRIGHT","TURNRIGHT","TURNSHARPRIGHT","ARRIVELEFT","ARRIVERIGHT","TAKEROUNDABOUTRIGHT","TAKEROUNDABOUTLEFT","includes","maneuverType","modifier","accDistance","time","accTime","findIndex","exit","idx","wpIndices"],"mappings":"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"}