/*!
 * Locatienet @locatienet/leaflet-tilelayer v1.0.2 (https://github.com/locatienetbv/locatienet-js/leaflet-tilelayer#readme)
 * Copyright 2021-2025 Remco Zut
 * Licensed under MIT (https://github.com/locatienetbv/locatienet-js/LICENSE)
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("leaflet")):"function"==typeof define&&define.amd?define(["exports","leaflet"],e):e(((t="undefined"!=typeof globalThis?globalThis:t||self).L=t.L||{},t.L.LocatienetTilelayer={}),t.L)}(this,function(t,e){"use strict";function o(t){var e=Object.create(null);return t&&Object.keys(t).forEach(function(o){if("default"!==o){var r=Object.getOwnPropertyDescriptor(t,o);Object.defineProperty(e,o,r.get?r:{enumerable:!0,get:function(){return t[o]}})}}),e.default=t,Object.freeze(e)}var r,n=o(e),s={exports:{}};var i=(r||(r=1,function(t,e){!function(t){const e=window.LN_API_KEY||function(){const t=document.getElementsByTagName("script"),e=t[t.length-1];return e&&new URLSearchParams(e.src.split("?")[1]).get("apikey")||""}()||"";class o extends Error{constructor(t,e,o){super(o),this.name="ApiError",this.url=e.url,this.status=e.status,this.statusText=e.statusText,this.body=e.body,this.request=t}}function r(t,e,o,r){if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===o?r:"a"===o?r.call(t):r?r.value:e.get(t)}function n(t,e,o,r,n){if("function"==typeof e||!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,o),o}var s,i,a,c,u,f,d;"function"==typeof SuppressedError&&SuppressedError;class l extends Error{constructor(t){super(t),this.name="CancelError"}get isCancelled(){return!0}}class h{constructor(t){s.set(this,void 0),i.set(this,void 0),a.set(this,void 0),c.set(this,void 0),u.set(this,void 0),f.set(this,void 0),d.set(this,void 0),n(this,s,!1),n(this,i,!1),n(this,a,!1),n(this,c,[]),n(this,u,new Promise((e,o)=>{n(this,f,e,"f"),n(this,d,o,"f");const u=t=>{r(this,s,"f")||r(this,i,"f")||r(this,a,"f")||r(this,c,"f").push(t)};return Object.defineProperty(u,"isResolved",{get:()=>r(this,s,"f")}),Object.defineProperty(u,"isRejected",{get:()=>r(this,i,"f")}),Object.defineProperty(u,"isCancelled",{get:()=>r(this,a,"f")}),t(t=>{r(this,s,"f")||r(this,i,"f")||r(this,a,"f")||(n(this,s,!0,"f"),r(this,f,"f")&&r(this,f,"f").call(this,t))},t=>{r(this,s,"f")||r(this,i,"f")||r(this,a,"f")||(n(this,i,!0,"f"),r(this,d,"f")&&r(this,d,"f").call(this,t))},u)}))}get[(s=new WeakMap,i=new WeakMap,a=new WeakMap,c=new WeakMap,u=new WeakMap,f=new WeakMap,d=new WeakMap,Symbol.toStringTag)](){return"Cancellable Promise"}then(t,e){return r(this,u,"f").then(t,e)}catch(t){return r(this,u,"f").catch(t)}finally(t){return r(this,u,"f").finally(t)}cancel(){if(!(r(this,s,"f")||r(this,i,"f")||r(this,a,"f"))){if(n(this,a,!0),r(this,c,"f").length)try{for(const t of r(this,c,"f"))t()}catch(t){return void console.warn("Cancellation threw an error",t)}r(this,c,"f").length=0,r(this,d,"f")&&r(this,d,"f").call(this,new l("Request aborted"))}}get isCancelled(){return r(this,a,"f")}}const p={BASE:"https://services.locatienet.com",VERSION:"1.0",WITH_CREDENTIALS:!1,CREDENTIALS:"include",TOKEN:void 0,USERNAME:void 0,PASSWORD:void 0,HEADERS:void 0,ENCODE_PATH:void 0},y=t=>null!=t,w=t=>"string"==typeof t,m=t=>w(t)&&""!==t,b=t=>"object"==typeof t&&"string"==typeof t.type&&"function"==typeof t.stream&&"function"==typeof t.arrayBuffer&&"function"==typeof t.constructor&&"string"==typeof t.constructor.name&&/^(Blob|File)$/.test(t.constructor.name)&&/^(Blob|File)$/.test(t[Symbol.toStringTag]),T=t=>t instanceof FormData,g=t=>{const e=[],o=(t,r)=>{y(r)&&(Array.isArray(r)?r.forEach(e=>{o(t,e)}):"object"==typeof r?Object.entries(r).forEach(([e,r])=>{o(`${t}[${e}]`,r)}):((t,o)=>{e.push(`${encodeURIComponent(t)}=${encodeURIComponent(String(o))}`)})(t,r))};return Object.entries(t).forEach(([t,e])=>{o(t,e)}),e.length>0?`?${e.join("&")}`:""},E=async(t,e)=>"function"==typeof e?e(t):e,L=async(t,e)=>{const[o,r,n,s]=await Promise.all([E(e,t.TOKEN),E(e,t.USERNAME),E(e,t.PASSWORD),E(e,t.HEADERS)]),i=Object.entries({Accept:"application/json",...s,...e.headers}).filter(([t,e])=>y(e)).reduce((t,[e,o])=>({...t,[e]:String(o)}),{});if(m(o)&&(i.Authorization=`Bearer ${o}`),m(r)&&m(n)){const t=(t=>{try{return btoa(t)}catch(e){return Buffer.from(t).toString("base64")}})(`${r}:${n}`);i.Authorization=`Basic ${t}`}return void 0!==e.body&&(e.mediaType?i["Content-Type"]=e.mediaType:b(e.body)?i["Content-Type"]=e.body.type||"application/octet-stream":w(e.body)?i["Content-Type"]="text/plain":T(e.body)||(i["Content-Type"]="application/json")),new Headers(i)},S=(t,e)=>new h(async(r,n,s)=>{try{const n=((t,e)=>{const o=encodeURI,r=e.url.replace("{api-version}",t.VERSION).replace(/{(.*?)}/g,(t,r)=>e.path?.hasOwnProperty(r)?o(String(e.path[r])):t),n=`${t.BASE}${r}`;return e.query?`${n}${g(e.query)}`:n})(t,e),i=(t=>{if(t.formData){const e=new FormData,o=(t,o)=>{w(o)||b(o)?e.append(t,o):e.append(t,JSON.stringify(o))};return Object.entries(t.formData).filter(([t,e])=>y(e)).forEach(([t,e])=>{Array.isArray(e)?e.forEach(e=>o(t,e)):o(t,e)}),e}})(e),a=(t=>{if(void 0!==t.body)return t.mediaType?.includes("/json")?JSON.stringify(t.body):w(t.body)||b(t.body)||T(t.body)?t.body:JSON.stringify(t.body)})(e),c=await L(t,e);if(!s.isCancelled){const t=await(async(t,e,o,r,n,s,i)=>{const a=new AbortController,c={headers:s,body:r??n,method:e.method,signal:a.signal};return i(()=>a.abort()),await fetch(o,c)})(0,e,n,a,i,c,s),u=await(async t=>{if(204!==t.status)try{const e=t.headers.get("Content-Type");if(e)return["application/json","application/problem+json"].some(t=>e.toLowerCase().startsWith(t))?await t.json():await t.text()}catch(t){console.error(t)}})(t),f=((t,e)=>{if(e){const o=t.headers.get(e);if(w(o))return o}})(t,e.responseHeader),d={url:n,ok:t.ok,status:t.status,statusText:t.statusText,body:f??u};((t,e)=>{const r={400:"Bad Request",401:"Unauthorized",403:"Forbidden",404:"Not Found",500:"Internal Server Error",502:"Bad Gateway",503:"Service Unavailable",...t.errors}[e.status];if(r)throw new o(t,e,r);if(!e.ok){const r=e.status??"unknown",n=e.statusText??"unknown",s=(()=>{try{return JSON.stringify(e.body,null,2)}catch(t){return}})();throw new o(t,e,`Generic Error: status: ${r}; status text: ${n}; body: ${s}`)}})(e,d),r(d.body)}}catch(t){n(t)}});class v{static postRsV1LocateSearchByText(t){return S(p,{method:"POST",url:"/rs/v1/Locate/searchByText",body:t,mediaType:"application/json"})}static postRsV1LocateSearchByAddress(t){return S(p,{method:"POST",url:"/rs/v1/Locate/searchByAddress",body:t,mediaType:"application/json"})}static postRsV1RouteCalculateRouteInfo(t){return S(p,{method:"POST",url:"/rs/v1/Route/calculateRouteInfo",body:t,mediaType:"application/json"})}static getRsV1CountryList(){return S(p,{method:"GET",url:"/rs/v1/Country/list"})}}p.BASE="https://services.locatienet.com",p.HEADERS={"X-API-KEY":e};const R={apikey:e,countries:async()=>await v.getRsV1CountryList(),locateByText:async(t,e,o)=>{const r={text:t,country:e,options:o};return await v.postRsV1LocateSearchByText(r).then(t=>t.map(t=>({type:"Feature",geometry:{type:"Point",coordinates:[t.coordinate?.x,t.coordinate?.y]},properties:{description:t.description}})))}};"undefined"!=typeof window&&(window.LN=window.LN||{},window.LN.api=R),t.Api=R}(e)}(0,s.exports)),s.exports);const a=`https://tile{s}.locatienet.com/{z}/{x}/{y}.png?apikey=${i.Api.apikey}`,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";const u={sku:function(t){let e=" ";for(let o=0;o<t;o++)e+=c.charAt(Math.floor(62*Math.random()));return e}(10),subdomains:"0123",minZoom:4,maxZoom:23,attribution:(new Date).getFullYear()+' &#169; <a href="https://locatienet.com">Locatienet</a>, <a href="https://ptvgroup.com">PTV Group</a>, <a href="https://here.com">HERE</a>'};class f extends n.TileLayer{constructor(){super(a,u)}createTile(t,e){const o=this.getTileUrl(t),r=document.createElement("img");r._map=this._map;const n={};return u.sku&&(n.sku=u.sku),(async()=>{try{const t=await fetch(o,{headers:n});if(!t.ok)throw new Error(`HTTP ${t.status}`);const s=await t.blob(),i=URL.createObjectURL(s);r.src=i,r.onload=r.onerror=()=>{URL.revokeObjectURL(i)},e(void 0,r)}catch(t){e(void 0,r)}})(),r}}"undefined"!=typeof window&&window.L&&(window.L=window.L||{},window.L.LocatienetTileLayer=window.L.LocatienetTileLayer||{},window.L.locatienetTileLayer=function(){return new f}),t.LocatienetTileLayer=f});
//# sourceMappingURL=leaflet-tilelayer.min.js.map
